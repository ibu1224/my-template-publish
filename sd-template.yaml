namespace: ibu-test
name: template-publish-test
version: '1.0.0'
description: "foobar"
maintainer: foo@bar.com
config:
  shared:
    image: node:20
  jobs:
    validate:
      requires: [ ~commit ]
      steps:
        - install: npm i -g screwdriver-template-main
        - validate: template-validate
    publish:
      requires: [ ~validate ]
      steps:
        - npm i -g screwdriver-template-main
        - template-publish
    promote:
      requires: []
      steps:
      　　- install: npm i -g screwdriver-template-main
       - get_template_version: |
        export VERSION=`./node_modules/.bin/template-get-version-from-tag --name "$TEMPLATE_NAME" --tag "$FROM_TAG_NAME"`
       - promote_tag: |
        ./node_modules/.bin/template-tag --name "$TEMPLATE_NAME" --version "$VERSION" --tag "$TO_TAG_NAME"
